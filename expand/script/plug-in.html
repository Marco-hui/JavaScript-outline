<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>插件封装 | JavaScript-outline</title>
    <meta name="description" content="JavaScript 知识概要">
    <link rel="icon" href="/JavaScript-outline/favicon.ico">
    
    <link rel="preload" href="/JavaScript-outline/assets/css/0.styles.3b78d28c.css" as="style"><link rel="preload" href="/JavaScript-outline/assets/js/app.90c80948.js" as="script"><link rel="preload" href="/JavaScript-outline/assets/js/6.b4c44821.js" as="script"><link rel="prefetch" href="/JavaScript-outline/assets/js/10.642800d4.js"><link rel="prefetch" href="/JavaScript-outline/assets/js/11.693b21f8.js"><link rel="prefetch" href="/JavaScript-outline/assets/js/12.3a328184.js"><link rel="prefetch" href="/JavaScript-outline/assets/js/13.04a46d6f.js"><link rel="prefetch" href="/JavaScript-outline/assets/js/14.3aa62229.js"><link rel="prefetch" href="/JavaScript-outline/assets/js/15.a74f54f5.js"><link rel="prefetch" href="/JavaScript-outline/assets/js/16.5d77e461.js"><link rel="prefetch" href="/JavaScript-outline/assets/js/17.d88d6771.js"><link rel="prefetch" href="/JavaScript-outline/assets/js/18.bb45643a.js"><link rel="prefetch" href="/JavaScript-outline/assets/js/19.0424d057.js"><link rel="prefetch" href="/JavaScript-outline/assets/js/2.37b6ca0e.js"><link rel="prefetch" href="/JavaScript-outline/assets/js/20.513e2624.js"><link rel="prefetch" href="/JavaScript-outline/assets/js/21.9d510487.js"><link rel="prefetch" href="/JavaScript-outline/assets/js/22.272bfd58.js"><link rel="prefetch" href="/JavaScript-outline/assets/js/23.299438a7.js"><link rel="prefetch" href="/JavaScript-outline/assets/js/24.8f074f48.js"><link rel="prefetch" href="/JavaScript-outline/assets/js/25.02e8529b.js"><link rel="prefetch" href="/JavaScript-outline/assets/js/26.9c01c312.js"><link rel="prefetch" href="/JavaScript-outline/assets/js/27.1dc657f7.js"><link rel="prefetch" href="/JavaScript-outline/assets/js/28.946f61a3.js"><link rel="prefetch" href="/JavaScript-outline/assets/js/29.75d903e8.js"><link rel="prefetch" href="/JavaScript-outline/assets/js/3.3803724c.js"><link rel="prefetch" href="/JavaScript-outline/assets/js/30.66824cac.js"><link rel="prefetch" href="/JavaScript-outline/assets/js/31.6db38385.js"><link rel="prefetch" href="/JavaScript-outline/assets/js/32.cfe18635.js"><link rel="prefetch" href="/JavaScript-outline/assets/js/33.e4d0687c.js"><link rel="prefetch" href="/JavaScript-outline/assets/js/34.075ff1ac.js"><link rel="prefetch" href="/JavaScript-outline/assets/js/35.8dfadab1.js"><link rel="prefetch" href="/JavaScript-outline/assets/js/36.a51fea16.js"><link rel="prefetch" href="/JavaScript-outline/assets/js/37.557a8caf.js"><link rel="prefetch" href="/JavaScript-outline/assets/js/38.f060c7f1.js"><link rel="prefetch" href="/JavaScript-outline/assets/js/4.a2ebf6c7.js"><link rel="prefetch" href="/JavaScript-outline/assets/js/5.309eeb0e.js"><link rel="prefetch" href="/JavaScript-outline/assets/js/7.7f9964ec.js"><link rel="prefetch" href="/JavaScript-outline/assets/js/8.d28ea238.js"><link rel="prefetch" href="/JavaScript-outline/assets/js/9.d13ec241.js">
    <link rel="stylesheet" href="/JavaScript-outline/assets/css/0.styles.3b78d28c.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><!----> <header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/JavaScript-outline/" class="home-link router-link-active"><!----> <span class="site-name">JavaScript-outline</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/JavaScript-outline/guide/" class="nav-link">JavaScript</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">拓展</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>技能</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/JavaScript-outline/expand/skill/jquery.html" class="nav-link">jQuery</a></li><li class="dropdown-subitem"><a href="/JavaScript-outline/expand/skill/gulp.html" class="nav-link">gulp</a></li><li class="dropdown-subitem"><a href="/JavaScript-outline/expand/skill/php.html" class="nav-link">PHP</a></li><li class="dropdown-subitem"><a href="/JavaScript-outline/expand/skill/mysql.html" class="nav-link">MySql</a></li><li class="dropdown-subitem"><a href="/JavaScript-outline/expand/skill/git.html" class="nav-link">Git</a></li></ul></li><li class="dropdown-item"><h4>脚本</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/JavaScript-outline/expand/script/function.html" class="nav-link">函数封装</a></li><li class="dropdown-subitem"><a href="/JavaScript-outline/expand/script/plug-in.html" class="nav-link router-link-exact-active router-link-active">插件封装</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">生态系统</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>项目</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://github.com/Marco-hui/vue-admin-web" target="_blank" rel="noopener noreferrer" class="nav-link external">
  vue-admin-web
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></li><li class="dropdown-item"><h4>帮助</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://www.cnblogs.com/Marco-hui/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  作者Blog
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-subitem"><a href="https://github.com/Marco-hui/JavaScript-outline/releases" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Changelog
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></li></ul></div></div> <a href="https://github.com/Marco-hui/JavaScript-outline" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/JavaScript-outline/guide/" class="nav-link">JavaScript</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">拓展</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>技能</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/JavaScript-outline/expand/skill/jquery.html" class="nav-link">jQuery</a></li><li class="dropdown-subitem"><a href="/JavaScript-outline/expand/skill/gulp.html" class="nav-link">gulp</a></li><li class="dropdown-subitem"><a href="/JavaScript-outline/expand/skill/php.html" class="nav-link">PHP</a></li><li class="dropdown-subitem"><a href="/JavaScript-outline/expand/skill/mysql.html" class="nav-link">MySql</a></li><li class="dropdown-subitem"><a href="/JavaScript-outline/expand/skill/git.html" class="nav-link">Git</a></li></ul></li><li class="dropdown-item"><h4>脚本</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/JavaScript-outline/expand/script/function.html" class="nav-link">函数封装</a></li><li class="dropdown-subitem"><a href="/JavaScript-outline/expand/script/plug-in.html" class="nav-link router-link-exact-active router-link-active">插件封装</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">生态系统</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>项目</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://github.com/Marco-hui/vue-admin-web" target="_blank" rel="noopener noreferrer" class="nav-link external">
  vue-admin-web
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></li><li class="dropdown-item"><h4>帮助</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://www.cnblogs.com/Marco-hui/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  作者Blog
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-subitem"><a href="https://github.com/Marco-hui/JavaScript-outline/releases" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Changelog
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></li></ul></div></div> <a href="https://github.com/Marco-hui/JavaScript-outline" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav> <div class="load-success"><div id="codefund"></div></div> <ul class="sidebar-links"><li><div class="sidebar-group first collapsable"><p class="sidebar-heading"><span>技能</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group"><p class="sidebar-heading open"><span>脚本</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/JavaScript-outline/expand/script/function.html" class="sidebar-link">函数封装</a></li><li><a href="/JavaScript-outline/expand/script/plug-in.html" class="active sidebar-link">插件封装</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/JavaScript-outline/expand/script/plug-in.html#日期格式化插件" class="sidebar-link">日期格式化插件</a></li><li class="sidebar-sub-header"><a href="/JavaScript-outline/expand/script/plug-in.html#ajax请求插件" class="sidebar-link">Ajax请求插件</a></li><li class="sidebar-sub-header"><a href="/JavaScript-outline/expand/script/plug-in.html#轮播图插件" class="sidebar-link">轮播图插件</a></li><li class="sidebar-sub-header"><a href="/JavaScript-outline/expand/script/plug-in.html#放大镜插件" class="sidebar-link">放大镜插件</a></li></ul></li></ul></div></li></ul> </div> <div class="page"> <div class="content"><h1 id="插件封装"><a href="#插件封装" class="header-anchor">#</a> 插件封装</h1> <p>下面列出开发过程中常用的一些插件的封装，供大家参考</p> <h2 id="日期格式化插件"><a href="#日期格式化插件" class="header-anchor">#</a> 日期格式化插件</h2> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token class-name">Date</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>format<span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token class-name">Date</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">format</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">fmt</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">// 这里面的this指向实例，即谁调用format方法this就指向谁</span>
    <span class="token keyword">var</span> o<span class="token operator">=</span><span class="token punctuation">{</span>
      <span class="token string">&quot;M+&quot;</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getMonth</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span>
      <span class="token string">&quot;D+&quot;</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getDate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token string">&quot;h+&quot;</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getHours</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token string">&quot;m+&quot;</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getMinutes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token string">&quot;s+&quot;</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getSeconds</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token comment">// 配置年份（年份比较特殊，这里单独处理）</span>
    <span class="token comment">// 若有年份，则匹配年份，利用RegExp.$1可以获取第一个分组内容</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token regex">/(Y+)/</span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>fmt<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token comment">// true 说明有传入年份</span>
      <span class="token keyword">var</span> res<span class="token operator">=</span><span class="token function">String</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getFullYear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">substr</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token operator">-</span>RegExp<span class="token punctuation">.</span>$<span class="token number">1.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span>
      fmt<span class="token operator">=</span>fmt<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>RegExp<span class="token punctuation">.</span>$<span class="token number">1</span><span class="token punctuation">,</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 配置其他</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> attr <span class="token keyword">in</span> o<span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token keyword">var</span> reg<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">RegExp</span><span class="token punctuation">(</span><span class="token string">'('</span><span class="token operator">+</span>attr<span class="token operator">+</span><span class="token string">')'</span><span class="token punctuation">)</span>
      <span class="token keyword">if</span><span class="token punctuation">(</span>reg<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>fmt<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">var</span> res <span class="token operator">=</span> RegExp<span class="token punctuation">.</span>$<span class="token number">1.</span>length<span class="token operator">&lt;</span><span class="token number">2</span> <span class="token operator">?</span> o<span class="token punctuation">[</span>attr<span class="token punctuation">]</span> <span class="token operator">:</span> <span class="token punctuation">(</span><span class="token string">'00'</span><span class="token operator">+</span>o<span class="token punctuation">[</span>attr<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">substr</span><span class="token punctuation">(</span><span class="token function">String</span><span class="token punctuation">(</span>o<span class="token punctuation">[</span>attr<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span>
        fmt<span class="token operator">=</span>fmt<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>RegExp<span class="token punctuation">.</span>$<span class="token number">1</span><span class="token punctuation">,</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> fmt<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>使用示例：<code>new Date().format('YYYY-MM-DD hh:mm:ss')</code></p> <h2 id="ajax请求插件"><a href="#ajax请求插件" class="header-anchor">#</a> Ajax请求插件</h2> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">Ajax</span><span class="token punctuation">(</span><span class="token parameter">opt</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">var</span> Default<span class="token operator">=</span><span class="token punctuation">{</span>
    type<span class="token operator">:</span><span class="token string">'get'</span><span class="token punctuation">,</span>
    async<span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span>
    jsonpName<span class="token operator">:</span><span class="token string">'callback'</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">var</span> opt<span class="token operator">=</span>Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>Default<span class="token punctuation">,</span>opt<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span>opt<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token class-name">Ajax</span><span class="token punctuation">.</span>prototype<span class="token operator">=</span><span class="token punctuation">{</span>
  constructor<span class="token operator">:</span>Ajax<span class="token punctuation">,</span>
  <span class="token function">init</span><span class="token punctuation">(</span><span class="token parameter">opt</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    opt<span class="token punctuation">.</span>type<span class="token operator">=</span>opt<span class="token punctuation">.</span>type<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> params<span class="token operator">=</span><span class="token string">''</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> attr <span class="token keyword">in</span> opt<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">{</span>
      params <span class="token operator">+=</span> attr <span class="token operator">+</span> <span class="token string">&quot;=&quot;</span> <span class="token operator">+</span> opt<span class="token punctuation">.</span>data<span class="token punctuation">[</span>attr<span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token string">'&amp;'</span> <span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    params<span class="token operator">=</span>params<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">var</span> arr_status<span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">200</span><span class="token punctuation">,</span><span class="token number">304</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

    <span class="token keyword">var</span> type<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">'get'</span><span class="token punctuation">,</span><span class="token string">'jsonp'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>type<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>opt<span class="token punctuation">.</span>type<span class="token punctuation">)</span> <span class="token operator">&gt;=</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      opt<span class="token punctuation">.</span>url <span class="token operator">=</span> <span class="token punctuation">(</span>opt<span class="token punctuation">.</span>url<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">'?'</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token operator">?</span> <span class="token string">'?'</span> <span class="token operator">:</span> <span class="token string">'&amp;'</span><span class="token punctuation">)</span> <span class="token operator">+</span> params<span class="token punctuation">;</span>
      params<span class="token operator">=</span><span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">if</span><span class="token punctuation">(</span>opt<span class="token punctuation">.</span>type<span class="token operator">===</span><span class="token string">'jsonp'</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token keyword">var</span> callbackName<span class="token operator">=</span><span class="token string">'getDate'</span><span class="token operator">+</span>Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">var</span> script<span class="token punctuation">;</span>

      window<span class="token punctuation">[</span>callbackName<span class="token punctuation">]</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">var</span> res<span class="token operator">=</span>data<span class="token punctuation">;</span>
        <span class="token keyword">try</span><span class="token punctuation">{</span>
          res<span class="token operator">=</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token keyword">catch</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">{</span>
          <span class="token keyword">try</span><span class="token punctuation">{</span>
            res<span class="token operator">=</span><span class="token function">eval</span><span class="token punctuation">(</span><span class="token string">'('</span><span class="token operator">+</span>res<span class="token operator">+</span><span class="token string">')'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span><span class="token keyword">catch</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">{</span>
            res<span class="token operator">=</span>res<span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        opt<span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>

        script<span class="token punctuation">.</span>parentNode<span class="token punctuation">.</span><span class="token function">removeChild</span><span class="token punctuation">(</span>script<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>

      script<span class="token operator">=</span>document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'script'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      script<span class="token punctuation">.</span>src<span class="token operator">=</span>opt<span class="token punctuation">.</span>url<span class="token operator">+</span><span class="token string">'&amp;'</span><span class="token operator">+</span>opt<span class="token punctuation">.</span>jsonpName<span class="token operator">+</span><span class="token string">'='</span><span class="token operator">+</span>callbackName<span class="token punctuation">;</span>
      document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>script<span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">var</span> xhr<span class="token operator">=</span><span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token keyword">try</span><span class="token punctuation">{</span>
      xhr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token keyword">catch</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token keyword">try</span><span class="token punctuation">{</span>
        <span class="token comment">// ie低版本浏览有多种异步请求的实现</span>
        xhr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ActiveXObject</span><span class="token punctuation">(</span><span class="token string">&quot;Msxml2.XMLHTTP&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token keyword">catch</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">try</span><span class="token punctuation">{</span>
          xhr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">new</span> <span class="token function">ActiveXObject</span><span class="token punctuation">(</span><span class="token string">&quot;Microsoft.XMLHTTP&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token keyword">catch</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">{</span>
          <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'你的浏览器太low，赶紧换电脑'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    xhr<span class="token punctuation">.</span><span class="token function-variable function">onload</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token keyword">if</span><span class="token punctuation">(</span>arr_status<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>status<span class="token punctuation">)</span><span class="token operator">&gt;=</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">var</span> res<span class="token operator">=</span>xhr<span class="token punctuation">.</span>responseText<span class="token punctuation">;</span>
        <span class="token keyword">try</span><span class="token punctuation">{</span>
          res<span class="token operator">=</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token keyword">catch</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">{</span>
          <span class="token keyword">try</span><span class="token punctuation">{</span>
            res<span class="token operator">=</span><span class="token function">eval</span><span class="token punctuation">(</span><span class="token string">'('</span><span class="token operator">+</span>res<span class="token operator">+</span><span class="token string">')'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span><span class="token keyword">catch</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">{</span>
            res<span class="token operator">=</span>res<span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        opt<span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    xhr<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span>opt<span class="token punctuation">.</span>type<span class="token punctuation">,</span>opt<span class="token punctuation">.</span>url<span class="token punctuation">,</span>opt<span class="token punctuation">.</span>async<span class="token punctuation">)</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>opt<span class="token punctuation">.</span>type<span class="token operator">===</span><span class="token string">'post'</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      xhr<span class="token punctuation">.</span><span class="token function">setRequestHeader</span><span class="token punctuation">(</span><span class="token string">'content-type'</span><span class="token punctuation">,</span><span class="token string">'application/x-www-form-urlencoded'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    xhr<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">ajax</span><span class="token punctuation">(</span><span class="token parameter">opt</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Ajax</span><span class="token punctuation">(</span>opt<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

ajax<span class="token punctuation">.</span><span class="token function-variable function">get</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">opt</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  opt<span class="token punctuation">.</span>type <span class="token operator">=</span> <span class="token string">'get'</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Ajax</span><span class="token punctuation">(</span>opt<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
ajax<span class="token punctuation">.</span><span class="token function-variable function">post</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">opt</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  opt<span class="token punctuation">.</span>type <span class="token operator">=</span> <span class="token string">'post'</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Ajax</span><span class="token punctuation">(</span>opt<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
ajax<span class="token punctuation">.</span><span class="token function-variable function">jsonp</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">opt</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  opt<span class="token punctuation">.</span>type <span class="token operator">=</span> <span class="token string">'jsonp'</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Ajax</span><span class="token punctuation">(</span>opt<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="轮播图插件"><a href="#轮播图插件" class="header-anchor">#</a> 轮播图插件</h2> <div class="language-css extra-class"><pre class="language-css"><code><span class="token comment">/* jquery-mcarousel.css */</span>

<span class="token selector">ul,li</span><span class="token punctuation">{</span><span class="token property">margin</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span><span class="token property">padding</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span><span class="token punctuation">}</span>
<span class="token selector">.mcarousel</span><span class="token punctuation">{</span><span class="token property">position</span><span class="token punctuation">:</span>relative<span class="token punctuation">;</span><span class="token property">overflow</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span><span class="token punctuation">}</span>
<span class="token selector">.mcarousel ul</span><span class="token punctuation">{</span><span class="token property">position</span><span class="token punctuation">:</span>absolute<span class="token punctuation">;</span><span class="token property">left</span><span class="token punctuation">:</span>0<span class="token punctuation">;</span><span class="token property">top</span><span class="token punctuation">:</span>0<span class="token punctuation">;</span><span class="token property">overflow</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span><span class="token property">list-style</span><span class="token punctuation">:</span>none<span class="token punctuation">;</span><span class="token punctuation">}</span>
<span class="token selector">.mcarousel ul.horizontal li</span><span class="token punctuation">{</span><span class="token property">float</span><span class="token punctuation">:</span>left<span class="token punctuation">;</span><span class="token punctuation">}</span>
<span class="token selector">.mcarousel ul.fade li</span><span class="token punctuation">{</span><span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span><span class="token property">top</span><span class="token punctuation">:</span>0<span class="token punctuation">;</span><span class="token property">left</span><span class="token punctuation">:</span>0<span class="token punctuation">}</span>
<span class="token selector">.mcarousel img</span><span class="token punctuation">{</span><span class="token property">display</span><span class="token punctuation">:</span>block<span class="token punctuation">;</span><span class="token punctuation">}</span>
<span class="token selector">.mcarousel .page</span><span class="token punctuation">{</span><span class="token property">position</span><span class="token punctuation">:</span>absolute<span class="token punctuation">;</span><span class="token property">left</span><span class="token punctuation">:</span>50%<span class="token punctuation">;</span><span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">translateX</span><span class="token punctuation">(</span>-50%<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token property">bottom</span><span class="token punctuation">:</span>10px<span class="token punctuation">;</span><span class="token punctuation">}</span>
<span class="token selector">.mcarousel .page span</span><span class="token punctuation">{</span><span class="token property">display</span><span class="token punctuation">:</span>inline-block<span class="token punctuation">;</span><span class="token property">width</span><span class="token punctuation">:</span> 15px<span class="token punctuation">;</span><span class="token property">height</span><span class="token punctuation">:</span> 15px<span class="token punctuation">;</span><span class="token property">overflow</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span><span class="token property">background</span><span class="token punctuation">:</span> #ccc<span class="token punctuation">;</span><span class="token property">border-radius</span><span class="token punctuation">:</span> 50%<span class="token punctuation">;</span><span class="token property">margin</span><span class="token punctuation">:</span>0 3px<span class="token punctuation">;</span><span class="token property">text-indent</span><span class="token punctuation">:</span>-1000px<span class="token punctuation">;</span><span class="token punctuation">}</span>
<span class="token selector">.mcarousel .page span.active</span><span class="token punctuation">{</span><span class="token property">background</span><span class="token punctuation">:</span> <span class="token function">rgb</span><span class="token punctuation">(</span>215<span class="token punctuation">,</span>6<span class="token punctuation">,</span>59<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span>

<span class="token selector">.mcarousel &gt; span</span><span class="token punctuation">{</span><span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span><span class="token property">top</span><span class="token punctuation">:</span>50%<span class="token punctuation">;</span><span class="token property">left</span><span class="token punctuation">:</span>10px<span class="token punctuation">;</span><span class="token property">transform</span><span class="token punctuation">:</span><span class="token function">translate</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span>-50%<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token property">width</span><span class="token punctuation">:</span>30px<span class="token punctuation">;</span><span class="token property">height</span><span class="token punctuation">:</span>60px<span class="token punctuation">;</span><span class="token property">line-height</span><span class="token punctuation">:</span>60px<span class="token punctuation">;</span><span class="token property">text-align</span><span class="token punctuation">:</span>center<span class="token punctuation">;</span><span class="token property">background-color</span><span class="token punctuation">:</span> <span class="token function">rgba</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span>0<span class="token punctuation">,</span>0<span class="token punctuation">,</span>.3<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token property">color</span><span class="token punctuation">:</span>#fff<span class="token punctuation">;</span><span class="token property">cursor</span><span class="token punctuation">:</span>pointer<span class="token punctuation">;</span><span class="token punctuation">}</span>
<span class="token selector">.mcarousel .btn-next</span><span class="token punctuation">{</span><span class="token property">left</span><span class="token punctuation">:</span>auto<span class="token punctuation">;</span><span class="token property">right</span><span class="token punctuation">:</span>10px<span class="token punctuation">;</span><span class="token punctuation">}</span>
</code></pre></div><div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// jquery-mcarousel.js</span>

<span class="token punctuation">;</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">$</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  $<span class="token punctuation">.</span>fn<span class="token punctuation">.</span><span class="token function-variable function">mCarousel</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">options</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">var</span> defaults <span class="token operator">=</span> <span class="token punctuation">{</span>
      width<span class="token operator">:</span>options<span class="token punctuation">.</span>width<span class="token punctuation">,</span>
      height<span class="token operator">:</span>options<span class="token punctuation">.</span>height<span class="token punctuation">,</span>

      autoPlay<span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span>

      showSmall<span class="token operator">:</span><span class="token boolean">false</span><span class="token punctuation">,</span>

      showButton<span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span>

      showPage<span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span>

      duration<span class="token operator">:</span><span class="token number">4000</span><span class="token punctuation">,</span>

      <span class="token comment">// 轮播类型：fade:淡入淡出, vertial:垂直滚动, horizontal:水平滚动, show:幻灯片</span>
      type<span class="token operator">:</span><span class="token string">'vertical'</span><span class="token punctuation">,</span>

      index<span class="token operator">:</span><span class="token number">0</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token keyword">var</span> $<span class="token keyword">this</span> <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token keyword">var</span> opt <span class="token operator">=</span> $<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>defaults<span class="token punctuation">,</span>options<span class="token punctuation">)</span><span class="token punctuation">;</span>


      <span class="token keyword">var</span> carousel <span class="token operator">=</span> <span class="token punctuation">{</span>
        <span class="token function-variable function">init</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
          
          <span class="token keyword">var</span> $ul <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'&lt;ul/&gt;'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          $ul<span class="token punctuation">.</span><span class="token function">html</span><span class="token punctuation">(</span>opt<span class="token punctuation">.</span>imgs<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;li&gt;&lt;a href=&quot;#&quot;&gt;&lt;img src=&quot;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>item<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&quot;/&gt;&lt;/a&gt;&lt;/li&gt;</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

          $<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>$ul<span class="token punctuation">)</span><span class="token punctuation">;</span>

          $<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">addClass</span><span class="token punctuation">(</span><span class="token string">'mcarousel'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          $ul<span class="token punctuation">.</span><span class="token function">addClass</span><span class="token punctuation">(</span>opt<span class="token punctuation">.</span>type<span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token keyword">if</span><span class="token punctuation">(</span>opt<span class="token punctuation">.</span>type <span class="token operator">===</span> <span class="token string">'horizontal'</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            $ul<span class="token punctuation">.</span><span class="token function">width</span><span class="token punctuation">(</span>opt<span class="token punctuation">.</span>width<span class="token operator">*</span>opt<span class="token punctuation">.</span>imgs<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>opt<span class="token punctuation">.</span>type <span class="token operator">===</span> <span class="token string">'fade'</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            $ul<span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
              width<span class="token operator">:</span>opt<span class="token punctuation">.</span>width<span class="token punctuation">,</span>
              height<span class="token operator">:</span>opt<span class="token punctuation">.</span>height
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span>

          $<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            width<span class="token operator">:</span>opt<span class="token punctuation">.</span>width<span class="token punctuation">,</span>
            height<span class="token operator">:</span>opt<span class="token punctuation">.</span>height
          <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

          <span class="token keyword">if</span><span class="token punctuation">(</span>opt<span class="token punctuation">.</span>showPage<span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">var</span> $page <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'&lt;div/&gt;'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addClass</span><span class="token punctuation">(</span><span class="token string">'page'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token keyword">var</span> page_html <span class="token operator">=</span> <span class="token string">'&lt;span&gt;&lt;/span&gt;'</span><span class="token punctuation">.</span><span class="token function">repeat</span><span class="token punctuation">(</span>opt<span class="token punctuation">.</span>imgs<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span>
            $page<span class="token punctuation">.</span><span class="token function">html</span><span class="token punctuation">(</span>page_html<span class="token punctuation">)</span><span class="token punctuation">;</span>

            $page<span class="token punctuation">.</span><span class="token function">appendTo</span><span class="token punctuation">(</span>$<span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>opt<span class="token punctuation">.</span>showSmall<span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">var</span> $small <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'&lt;div/&gt;'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addClass</span><span class="token punctuation">(</span><span class="token string">'small'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">var</span> $cloneUl <span class="token operator">=</span> $ul<span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">removeClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">'style'</span><span class="token punctuation">,</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            $cloneUl<span class="token punctuation">.</span><span class="token function">appendTo</span><span class="token punctuation">(</span>$small<span class="token punctuation">)</span><span class="token punctuation">;</span>

            $small<span class="token punctuation">.</span><span class="token function">appendTo</span><span class="token punctuation">(</span>$<span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            $small<span class="token punctuation">.</span><span class="token function">width</span><span class="token punctuation">(</span>opt<span class="token punctuation">.</span>imgs<span class="token punctuation">.</span>length<span class="token operator">*</span><span class="token number">40</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span>

          <span class="token keyword">if</span><span class="token punctuation">(</span>opt<span class="token punctuation">.</span>showButton<span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">var</span> $btnPrev <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'&lt;span/&gt;'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addClass</span><span class="token punctuation">(</span><span class="token string">'btn-prev'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">html</span><span class="token punctuation">(</span><span class="token string">'&amp;lt;'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">var</span> $btnNext <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'&lt;span/&gt;'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addClass</span><span class="token punctuation">(</span><span class="token string">'btn-next'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">html</span><span class="token punctuation">(</span><span class="token string">'&amp;gt;'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            $<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token punctuation">[</span>$btnNext<span class="token punctuation">,</span>$btnPrev<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span>

          <span class="token keyword">if</span><span class="token punctuation">(</span>opt<span class="token punctuation">.</span>autoPlay<span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            $<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'mouseenter'</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
              <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'mouseleave'</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
              <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
          <span class="token punctuation">}</span>

          $<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span><span class="token string">'.page span'</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            opt<span class="token punctuation">.</span>index <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">index</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            carousel<span class="token punctuation">.</span><span class="token function">move</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span>

          <span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span><span class="token string">'.btn-prev'</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            opt<span class="token punctuation">.</span>index<span class="token operator">--</span><span class="token punctuation">;</span>
            carousel<span class="token punctuation">.</span><span class="token function">move</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span><span class="token string">'.btn-next'</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            opt<span class="token punctuation">.</span>index<span class="token operator">++</span><span class="token punctuation">;</span>
            carousel<span class="token punctuation">.</span><span class="token function">move</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

          <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">move</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token function-variable function">move</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
          <span class="token keyword">if</span><span class="token punctuation">(</span>opt<span class="token punctuation">.</span>index<span class="token operator">&gt;=</span>opt<span class="token punctuation">.</span>imgs<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">{</span>
            opt<span class="token punctuation">.</span>index <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>opt<span class="token punctuation">.</span>index<span class="token operator">&lt;</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            opt<span class="token punctuation">.</span>index <span class="token operator">=</span> opt<span class="token punctuation">.</span>imgs<span class="token punctuation">.</span>length<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span>

          <span class="token keyword">var</span> $ul <span class="token operator">=</span> $<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token string">'ul'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

          <span class="token keyword">var</span> params <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

          <span class="token keyword">if</span><span class="token punctuation">(</span>opt<span class="token punctuation">.</span>type <span class="token operator">===</span> <span class="token string">'vertical'</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            params<span class="token punctuation">.</span>top <span class="token operator">=</span> <span class="token operator">-</span>opt<span class="token punctuation">.</span>index<span class="token operator">*</span>opt<span class="token punctuation">.</span>height<span class="token punctuation">;</span>
            $ul<span class="token punctuation">.</span><span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">animate</span><span class="token punctuation">(</span>params<span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>opt<span class="token punctuation">.</span>type <span class="token operator">===</span> <span class="token string">'horizontal'</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            params<span class="token punctuation">.</span>left <span class="token operator">=</span> <span class="token operator">-</span>opt<span class="token punctuation">.</span>index<span class="token operator">*</span>opt<span class="token punctuation">.</span>width<span class="token punctuation">;</span>
            $ul<span class="token punctuation">.</span><span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">animate</span><span class="token punctuation">(</span>params<span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span>

          <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>opt<span class="token punctuation">.</span>type <span class="token operator">===</span> <span class="token string">'fade'</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            $ul<span class="token punctuation">.</span><span class="token function">children</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">eq</span><span class="token punctuation">(</span>opt<span class="token punctuation">.</span>index<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">animate</span><span class="token punctuation">(</span><span class="token punctuation">{</span>opacity<span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">siblings</span><span class="token punctuation">(</span><span class="token string">'li'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">animate</span><span class="token punctuation">(</span><span class="token punctuation">{</span>opacity<span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
            <span class="token comment">// $ul.children().stop().eq(opt.index).fadeIn(2000).siblings('li').fadeOut(2000); </span>
          <span class="token punctuation">}</span>

          <span class="token keyword">if</span><span class="token punctuation">(</span>opt<span class="token punctuation">.</span>showPage<span class="token punctuation">)</span><span class="token punctuation">{</span>
            $<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token string">'.page'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">children</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">eq</span><span class="token punctuation">(</span>opt<span class="token punctuation">.</span>index<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addClass</span><span class="token punctuation">(</span><span class="token string">'active'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">siblings</span><span class="token punctuation">(</span><span class="token string">'span'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">removeClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token function-variable function">stop</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
          <span class="token function">clearInterval</span><span class="token punctuation">(</span>opt<span class="token punctuation">.</span>timer<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token function-variable function">start</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
          opt<span class="token punctuation">.</span>timer <span class="token operator">=</span> <span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            opt<span class="token punctuation">.</span>index<span class="token operator">++</span><span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">move</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">,</span>opt<span class="token punctuation">.</span>duration<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>

      carousel<span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span>jQuery<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>使用示例：</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>stylesheet<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>text/css<span class="token punctuation">&quot;</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>./jquery-mcarousel.css<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>text/javascript<span class="token punctuation">&quot;</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>./jquery.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>banner<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>text/javascript<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#banner'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">mCarousel</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      imgs<span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">'../img/index_banner1.jpg'</span><span class="token punctuation">,</span><span class="token string">'../img/index_banner2.jpg'</span><span class="token punctuation">,</span><span class="token string">'../img/index_banner3.jpg'</span><span class="token punctuation">,</span><span class="token string">'../img/index_banner4.jpg'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      width<span class="token operator">:</span> <span class="token number">800</span><span class="token punctuation">,</span>
      height<span class="token operator">:</span> <span class="token number">454</span><span class="token punctuation">,</span>
      type<span class="token operator">:</span><span class="token string">'fade'</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h2 id="放大镜插件"><a href="#放大镜插件" class="header-anchor">#</a> 放大镜插件</h2> <div class="language-css extra-class"><pre class="language-css"><code><span class="token comment">/* jquery-mZoom.css */</span>

<span class="token selector">.m-zoom</span><span class="token punctuation">{</span><span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span><span class="token property">width</span><span class="token punctuation">:</span> 300px<span class="token punctuation">;</span><span class="token property">overflow</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span><span class="token punctuation">}</span>
<span class="token selector">.m-zoom img</span><span class="token punctuation">{</span><span class="token property">display</span><span class="token punctuation">:</span> block<span class="token punctuation">;</span><span class="token punctuation">}</span>
<span class="token selector">.m-zoom .minzoom</span><span class="token punctuation">{</span><span class="token property">display</span><span class="token punctuation">:</span>none<span class="token punctuation">;</span><span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span><span class="token property">width</span><span class="token punctuation">:</span>30px<span class="token punctuation">;</span><span class="token property">height</span><span class="token punctuation">:</span>30px<span class="token punctuation">;</span><span class="token property">border</span><span class="token punctuation">:</span>1px solid #fc0<span class="token punctuation">;</span><span class="token property">background-color</span><span class="token punctuation">:</span>#ff0<span class="token punctuation">;</span><span class="token property">filter</span><span class="token punctuation">:</span><span class="token function">alpha</span><span class="token punctuation">(</span>Opacity=30<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token property">background-color</span><span class="token punctuation">:</span> <span class="token function">rgba</span><span class="token punctuation">(</span>255<span class="token punctuation">,</span>255<span class="token punctuation">,</span>0<span class="token punctuation">,</span>.3<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span>
<span class="token selector">.m-zoom-big</span><span class="token punctuation">{</span><span class="token property">display</span><span class="token punctuation">:</span>none<span class="token punctuation">;</span><span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span><span class="token property">width</span><span class="token punctuation">:</span>400px<span class="token punctuation">;</span><span class="token property">height</span><span class="token punctuation">:</span>300px<span class="token punctuation">;</span><span class="token property">overflow</span><span class="token punctuation">:</span>hidden<span class="token punctuation">;</span><span class="token property">border</span><span class="token punctuation">:</span>1px solid #ccc<span class="token punctuation">;</span><span class="token punctuation">}</span>
<span class="token selector">.m-zoom-big img</span><span class="token punctuation">{</span><span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span><span class="token property">left</span><span class="token punctuation">:</span>0<span class="token punctuation">;</span><span class="token property">right</span><span class="token punctuation">:</span>0<span class="token punctuation">;</span><span class="token property">min-width</span><span class="token punctuation">:</span> 1000px<span class="token punctuation">;</span><span class="token punctuation">}</span>
</code></pre></div><div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// jquery-mZoom.js</span>

<span class="token punctuation">;</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">$</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  $<span class="token punctuation">.</span>fn<span class="token punctuation">.</span><span class="token function-variable function">mZoom</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">options</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">var</span> defaults<span class="token operator">=</span><span class="token punctuation">{</span>
      width<span class="token operator">:</span><span class="token number">400</span><span class="token punctuation">,</span>
      height<span class="token operator">:</span><span class="token number">300</span><span class="token punctuation">,</span>
      position<span class="token operator">:</span><span class="token string">'right'</span><span class="token punctuation">,</span>
      gap<span class="token operator">:</span><span class="token number">15</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token keyword">var</span> opt<span class="token operator">=</span>$<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>defaults<span class="token punctuation">,</span>options<span class="token punctuation">)</span><span class="token punctuation">;</span>
      opt<span class="token punctuation">.</span>position<span class="token operator">=</span>opt<span class="token punctuation">.</span>position<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">var</span> $small<span class="token operator">=</span><span class="token function">$</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      $small<span class="token punctuation">.</span><span class="token function">addClass</span><span class="token punctuation">(</span><span class="token string">'m-zoom'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">var</span> $smallImg<span class="token operator">=</span>$small<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token string">'img'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">function</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">var</span> $big<span class="token operator">=</span><span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'&lt;div/&gt;'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addClass</span><span class="token punctuation">(</span><span class="token string">'m-zoom-big'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        $big<span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token punctuation">{</span>width<span class="token operator">:</span>opt<span class="token punctuation">.</span>width<span class="token punctuation">,</span>height<span class="token operator">:</span>opt<span class="token punctuation">.</span>height<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">var</span> left<span class="token punctuation">,</span>top<span class="token punctuation">;</span>
        <span class="token keyword">switch</span><span class="token punctuation">(</span>opt<span class="token punctuation">.</span>position<span class="token punctuation">)</span><span class="token punctuation">{</span>
          <span class="token keyword">case</span> <span class="token string">&quot;right&quot;</span><span class="token operator">:</span>
            left<span class="token operator">=</span>$small<span class="token punctuation">.</span><span class="token function">offset</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>left <span class="token operator">+</span> $small<span class="token punctuation">.</span><span class="token function">outerWidth</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> opt<span class="token punctuation">.</span>gap<span class="token punctuation">;</span>
            top<span class="token operator">=</span>$small<span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token string">'top'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>
          <span class="token keyword">case</span> <span class="token string">&quot;bottom&quot;</span><span class="token operator">:</span>
            left<span class="token operator">=</span>$small<span class="token punctuation">.</span><span class="token function">offset</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>left<span class="token punctuation">;</span>
            top<span class="token operator">=</span>$small<span class="token punctuation">.</span><span class="token function">offset</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>top <span class="token operator">+</span> $small<span class="token punctuation">.</span><span class="token function">outerHeight</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> opt<span class="token punctuation">.</span>gap<span class="token punctuation">;</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>
          <span class="token keyword">case</span> <span class="token string">&quot;left&quot;</span><span class="token operator">:</span>
            left<span class="token operator">=</span>$small<span class="token punctuation">.</span><span class="token function">offset</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>left <span class="token operator">-</span> $big<span class="token punctuation">.</span><span class="token function">outerWidth</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> opt<span class="token punctuation">.</span>gap<span class="token punctuation">;</span>
            top<span class="token operator">=</span>$small<span class="token punctuation">.</span><span class="token function">offset</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>top<span class="token punctuation">;</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>
          <span class="token keyword">case</span> <span class="token string">&quot;top&quot;</span><span class="token operator">:</span>
            left<span class="token operator">=</span>$small<span class="token punctuation">.</span><span class="token function">offset</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>left<span class="token punctuation">;</span>
            top<span class="token operator">=</span>$small<span class="token punctuation">.</span><span class="token function">offset</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>top <span class="token operator">-</span> $big<span class="token punctuation">.</span><span class="token function">outerHeight</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> opt<span class="token punctuation">.</span>gap<span class="token punctuation">;</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        $big<span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
          left<span class="token operator">:</span>left<span class="token punctuation">,</span>
          top<span class="token operator">:</span>top
        <span class="token punctuation">}</span><span class="token punctuation">)</span>

        <span class="token keyword">var</span> $bigImg<span class="token operator">=</span><span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'&lt;img/&gt;'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">'src'</span><span class="token punctuation">,</span>$smallImg<span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">'data-big'</span><span class="token punctuation">)</span> <span class="token operator">||</span> $smallImg<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>src<span class="token punctuation">)</span><span class="token punctuation">;</span>
        $bigImg<span class="token punctuation">.</span><span class="token function">appendTo</span><span class="token punctuation">(</span>$big<span class="token punctuation">)</span><span class="token punctuation">;</span>
        $big<span class="token punctuation">.</span><span class="token function">insertAfter</span><span class="token punctuation">(</span>$small<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">var</span> $minzoom<span class="token operator">=</span><span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'&lt;span/&gt;'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addClass</span><span class="token punctuation">(</span><span class="token string">'minzoom'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        $minzoom<span class="token punctuation">.</span><span class="token function">appendTo</span><span class="token punctuation">(</span>$small<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 鼠标移入小图区域显示大图和放大镜</span>
        <span class="token keyword">var</span> rate<span class="token punctuation">;</span>
        $small<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'mouseenter'</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
          $bigImg<span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">'src'</span><span class="token punctuation">,</span>$smallImg<span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">'data-big'</span><span class="token punctuation">)</span> <span class="token operator">||</span> $smallImg<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>src<span class="token punctuation">)</span><span class="token punctuation">;</span>
          $minzoom<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          $big<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          rate<span class="token operator">=</span>$bigImg<span class="token punctuation">.</span><span class="token function">outerWidth</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">/</span>$smallImg<span class="token punctuation">.</span><span class="token function">outerWidth</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          $minzoom<span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            width<span class="token operator">:</span>opt<span class="token punctuation">.</span>width<span class="token operator">/</span>rate<span class="token punctuation">,</span>
            height<span class="token operator">:</span>opt<span class="token punctuation">.</span>height<span class="token operator">/</span>rate
          <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'mouseleave'</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
          $minzoom<span class="token punctuation">.</span><span class="token function">hide</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          $big<span class="token punctuation">.</span><span class="token function">hide</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'mousemove'</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
          <span class="token keyword">var</span> top<span class="token operator">=</span>e<span class="token punctuation">.</span>pageY <span class="token operator">-</span> $small<span class="token punctuation">.</span><span class="token function">offset</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>top <span class="token operator">-</span> $minzoom<span class="token punctuation">.</span><span class="token function">outerHeight</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">;</span>
          <span class="token keyword">var</span> left<span class="token operator">=</span>e<span class="token punctuation">.</span>pageX <span class="token operator">-</span> $small<span class="token punctuation">.</span><span class="token function">offset</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>left <span class="token operator">-</span> $minzoom<span class="token punctuation">.</span><span class="token function">outerWidth</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">/</span><span class="token number">2</span>

          <span class="token keyword">if</span><span class="token punctuation">(</span>left<span class="token operator">&lt;</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            left<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>left<span class="token operator">&gt;</span>$small<span class="token punctuation">.</span><span class="token function">innerWidth</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span>$minzoom<span class="token punctuation">.</span><span class="token function">outerWidth</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            left<span class="token operator">=</span>$small<span class="token punctuation">.</span><span class="token function">innerWidth</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span>$minzoom<span class="token punctuation">.</span><span class="token function">outerWidth</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
          <span class="token keyword">if</span><span class="token punctuation">(</span>top<span class="token operator">&lt;</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            top<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>top<span class="token operator">&gt;</span>$small<span class="token punctuation">.</span><span class="token function">innerHeight</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span>$minzoom<span class="token punctuation">.</span><span class="token function">outerHeight</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            top<span class="token operator">=</span>$small<span class="token punctuation">.</span><span class="token function">innerHeight</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span>$minzoom<span class="token punctuation">.</span><span class="token function">outerHeight</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span>

          $minzoom<span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            top<span class="token operator">:</span>top<span class="token punctuation">,</span>
            left<span class="token operator">:</span>left
          <span class="token punctuation">}</span><span class="token punctuation">)</span>
          $bigImg<span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            top<span class="token operator">:</span><span class="token operator">-</span>top<span class="token operator">*</span>rate<span class="token punctuation">,</span>
            left<span class="token operator">:</span><span class="token operator">-</span>left<span class="token operator">*</span>rate
          <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span>jQuery<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>使用示例：</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token comment">&lt;!-- 定义容器main_goods，容器中包img标签，img显示小图，并将大图放于自定义参数中 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>main_goods<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>../img/small.jgp<span class="token punctuation">&quot;</span></span> <span class="token attr-name">data-big</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>../img/big.jgp<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>text/javascript<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token comment">// 直接调用，传入参数</span>
  <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#main_goods'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">mZoom</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    width<span class="token operator">:</span><span class="token number">450</span><span class="token punctuation">,</span>
    height<span class="token operator">:</span><span class="token number">450</span><span class="token punctuation">,</span>
    gap<span class="token operator">:</span><span class="token operator">-</span><span class="token number">35.5</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></div> <div class="page-edit"><div class="edit-link"><a href="https://github.com/Marco-hui/JavaScript-outline/edit/master/expand/script/plug-in.md" target="_blank" rel="noopener noreferrer">在 GitHub 上编辑此页</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="last-updated"><span class="prefix">上次更新: </span> <span class="time">2020-3-16 08:17:11</span></div></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/JavaScript-outline/expand/script/function.html" class="prev">
          函数封装
        </a></span> <!----></p></div> </div> <!----></div></div>
    <script src="/JavaScript-outline/assets/js/app.90c80948.js" defer></script><script src="/JavaScript-outline/assets/js/6.b4c44821.js" defer></script>
  </body>
</html>
